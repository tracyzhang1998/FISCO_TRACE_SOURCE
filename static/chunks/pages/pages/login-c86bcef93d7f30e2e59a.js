(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[544],{1721:function(e,n,t){"use strict";t.d(n,{gK:function(){return v},EX:function(){return T},cT:function(){return x},CS:function(){return y},m7:function(){return h},Dg:function(){return N},wv:function(){return j},pH:function(){return f},W$:function(){return l},td:function(){return b},gD:function(){return g},Xx:function(){return m},ap:function(){return w},kD:function(){return S}});var r=t(2809),a=t(2861),s=a.Z.create({baseURL:"/sign/WeBASE-Sign",headers:{"Content-Type":"application/json"},timeout:5e3}),i=a.Z.create({baseURL:"/contract/WeBASE-Front",headers:{"Content-Type":"application/json"},timeout:5e3});s.interceptors.request.use((function(e){return console.log("\u8bf7\u6c42\u62e6\u622a\u5668\u88ab\u89e6\u53d1\uff1a",e),e}),(function(e){return console.error("\u8bf7\u6c42\u62e6\u622a\u5668\u51fa\u9519\uff1a",e),Promise.reject(e)})),i.interceptors.request.use((function(e){return console.log("\u8bf7\u6c42\u62e6\u622a\u5668\u88ab\u89e6\u53d1\uff1a",e),e}),(function(e){return console.error("\u8bf7\u6c42\u62e6\u622a\u5668\u51fa\u9519\uff1a",e),Promise.reject(e)})),s.interceptors.response.use((function(e){return console.log("\u54cd\u5e94\u62e6\u622a\u5668\u88ab\u89e6\u53d1\uff1a",e),e.data}),(function(e){return console.error("\u54cd\u5e94\u62e6\u622a\u5668\u51fa\u9519\uff1a",e),Promise.reject(e.data)})),i.interceptors.response.use((function(e){return console.log("\u54cd\u5e94\u62e6\u622a\u5668\u88ab\u89e6\u53d1\uff1a",e),e.data}),(function(e){return console.error("\u54cd\u5e94\u62e6\u622a\u5668\u51fa\u9519\uff1a",e),Promise.reject(e.data)}));var o=t(8764);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var d={groupId:1,contractName:"SupplyChain",contractPath:"/SupplyChain",version:"",funcName:"isRegister",contractAddress:"0x2193b14e975b761323f6b774e906765ebf815770",contractAbi:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"nodeAddress",type:"address"},{indexed:!0,internalType:"enum SupplyChain.NodeType",name:"nodeType",type:"uint8"}],name:"NodeCanceled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"nodeAddress",type:"address"},{indexed:!0,internalType:"enum SupplyChain.NodeType",name:"nodeType",type:"uint8"}],name:"NodeRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"nodeAddress",type:"address"},{indexed:!0,internalType:"enum SupplyChain.NodeType",name:"nodeType",type:"uint8"}],name:"NodeVerified",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"productCode",type:"string"},{indexed:!0,internalType:"address",name:"nodeAddress",type:"address"}],name:"ProductInfoAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"productCode",type:"string"}],name:"ProductInfoVerified",type:"event"},{inputs:[{internalType:"string",name:"_productName",type:"string"},{internalType:"string",name:"_producerName",type:"string"},{internalType:"string",name:"_productionDate",type:"string"},{internalType:"string",name:"_location",type:"string"},{internalType:"string",name:"_batchNumber",type:"string"},{internalType:"string[]",name:"_ingredients",type:"string[]"}],name:"addProduct",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"admin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_node",type:"address"}],name:"cancelNode",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAllNode",outputs:[{components:[{internalType:"address",name:"nodeAddress",type:"address"},{internalType:"enum SupplyChain.NodeType",name:"nodeType",type:"uint8"},{internalType:"bool",name:"isRegistered",type:"bool"}],internalType:"struct SupplyChain.Node[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllProductHash",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_productHash",type:"uint256"}],name:"getProduct",outputs:[{components:[{internalType:"string",name:"productName",type:"string"},{internalType:"string",name:"producerName",type:"string"},{internalType:"string",name:"productionDate",type:"string"},{internalType:"string",name:"location",type:"string"},{internalType:"string",name:"batchNumber",type:"string"},{internalType:"string[]",name:"ingredients",type:"string[]"}],internalType:"struct SupplyChain.ProductInfo",name:"productInfo",type:"tuple"},{internalType:"address",name:"owner",type:"address"},{internalType:"bool",name:"paused",type:"bool"},{components:[{components:[{internalType:"address",name:"nodeAddress",type:"address"},{internalType:"enum SupplyChain.NodeType",name:"nodeType",type:"uint8"},{internalType:"bool",name:"isRegistered",type:"bool"}],internalType:"struct SupplyChain.Node",name:"node",type:"tuple"},{internalType:"bool",name:"isVerified",type:"bool"},{internalType:"uint256",name:"timestamp",type:"uint256"}],internalType:"struct SupplyChain.ChainTrace[]",name:"chainTraces",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_node",type:"address"}],name:"isRegister",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"nodes",outputs:[{internalType:"address",name:"nodeAddress",type:"address"},{internalType:"enum SupplyChain.NodeType",name:"nodeType",type:"uint8"},{internalType:"bool",name:"isRegistered",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"enum SupplyChain.NodeType",name:"_nodeType",type:"uint8"}],name:"registerNode",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_node",type:"address"},{internalType:"uint256",name:"_productHash",type:"uint256"}],name:"transferProduct",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_productHash",type:"uint256"}],name:"verifiedProduct",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_node",type:"address"}],name:"verifyNode",outputs:[],stateMutability:"nonpayable",type:"function"}],useAes:!1,useCns:!1,cnsName:""},c=function(e,n,t){return i.post("/trans/handleWithSign",p(p(p(p({},d),{},{signUserId:e,funcName:n},("string"===typeof t||"number"===typeof t)&&{funcParam:[t]}),Array.isArray(t)&&{funcParam:t}),"object"===typeof t&&!Array.isArray(t)&&{funcParam:Object.values(t)}))},l=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"test";return s.get("/user/newUser",{params:{signUserId:e,appId:n}})},y=function(e){return s.get("/user/".concat(e,"/userInfo"))},m=function(e,n){return n=o.Buffer.from(n).toString("hex"),s.post("/sign",{signUserId:e,encodedDataStr:n})},f=function(e,n){return c(e,"isRegister",n)},g=function(e,n){return c(e,"registerNode",n)},h=function(){return c("admin","getAllNode")},b=function(e,n){return c(e,"nodes",n)},T=function(e){return c("admin","verifyNode",e)},x=function(e){return c("admin","cancelNode",e)},v=function(e,n){return c(e,"addProduct",n)},N=function(){return c("admin","getAllProductHash")},j=function(e){return c("admin","getProduct",e)},w=function(e,n){return c(e,"transferProduct",n)},S=function(e,n){return c(e,"verifiedProduct",n)}},4378:function(e,n,t){"use strict";t.r(n);var r=t(266),a=t(809),s=t.n(a),i=t(7294),o=t(1664),u=t(5675),p=t(1163),d=t(1721),c=t(4663),l=t(3651),y=t(5893);n.default=function(){var e=(0,i.useContext)(l.WindmillContext).mode,n=(0,i.useState)(!1),t=n[0],a=n[1],m=(0,i.useState)(!1),f=m[0],g=m[1],h=(0,p.useRouter)(),b=(0,i.useState)(""),T=b[0],x=b[1],v=(0,i.useState)({}),N=v[0],j=v[1];(0,i.useEffect)((function(){t&&g(!0)}),[t]);var w="dark"===e?"/assets/img/login-office-dark.jpeg":"/assets/img/login-office.jpg";function S(){a(!1),g(!1)}function C(){return(C=(0,r.Z)(s().mark((function e(n){var t,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.CS)(n);case 2:if("success"===(t=e.sent).message){e.next=6;break}return alert("\u7528\u6237\u540d\u4e0d\u5b58\u5728\uff01"),e.abrupt("return");case 6:return j({signUserId:t.data.signUserId,address:t.data.address}),e.next=9,P(t.data.signUserId,t.data.address);case 9:return e.next=11,I(t.data.signUserId,t.data.address);case 11:r=e.sent,console.log(r[1].toString()),a=0,"true"==r[2]&&(a=1),(0,c.c)({signUserId:t.data.signUserId,address:t.data.address,nodeType:r[1],isRegister:a.toString()});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,n){return _.apply(this,arguments)}function _(){return(_=(0,r.Z)(s().mark((function e(n,t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.pH)(n,t);case 2:r=e.sent,a(r[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,n){return k.apply(this,arguments)}function k(){return(k=(0,r.Z)(s().mark((function e(n,t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.td)(n,t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Xx)(N.signUserId,"test");case 2:if("success"===e.sent.message){e.next=6;break}return alert("\u767b\u5f55\u9a8c\u8bc1\u5931\u8d25\uff01"),e.abrupt("return");case 6:A();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){h.push("/pages/")}return(0,y.jsxs)("div",{className:"flex flex-col justify-center items-center min-h-screen p-6 bg-gray-50 dark:bg-gray-900",children:[(0,y.jsx)("div",{className:"mb-16 text-center text-4xl font-bold",children:"\u4f9b\u5e94\u94fe\u6eaf\u6e90\u7ba1\u7406\u7cfb\u7edf"}),(0,y.jsx)("div",{className:"h-full w-1/2 mx-auto overflow-hidden bg-white rounded-lg shadow-xl dark:bg-gray-800",children:(0,y.jsxs)("div",{className:"flex flex-col overflow-y-auto md:flex-row",children:[(0,y.jsx)("div",{className:"relative h-32 md:h-auto md:w-1/2",children:(0,y.jsx)(u.default,{"aria-hidden":"true",className:"hidden object-cover w-full h-full",src:w,alt:"Office",layout:"fill"})}),(0,y.jsx)("main",{className:"flex items-center justify-center p-6 sm:p-12 md:w-1/2",children:(0,y.jsxs)("div",{className:"w-full",children:[(0,y.jsx)("h1",{className:"mb-8 text-xl font-semibold text-gray-700 dark:text-gray-200",children:"\u767b\u5f55"}),(0,y.jsxs)(l.Label,{children:[(0,y.jsx)("span",{children:"\u7528\u6237\u540d"}),(0,y.jsx)(l.Input,{className:"mt-1",type:"text",value:T,onChange:function(e){return x(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})]}),(0,y.jsx)(l.Button,{className:"mt-8",block:!0,onClick:function(){return function(e){return C.apply(this,arguments)}(T)},children:"\u767b\u5f55"}),(0,y.jsx)("hr",{className:"my-8"}),(0,y.jsx)("p",{className:"mt-1",children:(0,y.jsx)(o.default,{href:"/pages/create-account",children:(0,y.jsx)("a",{className:"text-sm font-medium text-purple-600 dark:text-purple-400 hover:underline",children:"\u6ce8\u518c\u8d26\u6237"})})})]})})]})}),(0,y.jsxs)(l.Modal,{isOpen:f,onClose:S,children:[(0,y.jsx)(l.ModalBody,{children:"\u786e\u8ba4\u767b\u5f55\uff1f"}),(0,y.jsxs)(l.ModalFooter,{children:[(0,y.jsx)(l.Button,{className:"w-full sm:w-auto",layout:"outline",onClick:S,children:"\u53d6\u6d88"}),(0,y.jsx)(l.Button,{className:"w-full sm:w-auto",onClick:function(){return O.apply(this,arguments)},children:"\u786e\u8ba4"})]})]})]})}},4663:function(e,n,t){"use strict";function r(e){localStorage.setItem("signUserId",e.signUserId),localStorage.setItem("address",e.address),localStorage.setItem("nodeType",e.nodeType),localStorage.setItem("isRegister",e.isRegister)}t.d(n,{c:function(){return r}})},1797:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pages/login",function(){return t(4378)}])}},function(e){e.O(0,[442,675,774,888,179],(function(){return n=1797,e(e.s=n);var n}));var n=e.O();_N_E=n}]);