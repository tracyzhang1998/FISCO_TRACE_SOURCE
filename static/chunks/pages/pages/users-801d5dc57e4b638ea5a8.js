(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[333],{1721:function(e,n,t){"use strict";t.d(n,{gK:function(){return v},EX:function(){return b},cT:function(){return x},CS:function(){return y},m7:function(){return T},Dg:function(){return j},wv:function(){return w},pH:function(){return m},W$:function(){return d},td:function(){return g},gD:function(){return h},Xx:function(){return f},ap:function(){return N},kD:function(){return C}});var r=t(2809),i=t(2861),a=i.Z.create({baseURL:"/sign/WeBASE-Sign",headers:{"Content-Type":"application/json"},timeout:5e3}),s=i.Z.create({baseURL:"/contract/WeBASE-Front",headers:{"Content-Type":"application/json"},timeout:5e3});a.interceptors.request.use((function(e){return console.log("\u8bf7\u6c42\u62e6\u622a\u5668\u88ab\u89e6\u53d1\uff1a",e),e}),(function(e){return console.error("\u8bf7\u6c42\u62e6\u622a\u5668\u51fa\u9519\uff1a",e),Promise.reject(e)})),s.interceptors.request.use((function(e){return console.log("\u8bf7\u6c42\u62e6\u622a\u5668\u88ab\u89e6\u53d1\uff1a",e),e}),(function(e){return console.error("\u8bf7\u6c42\u62e6\u622a\u5668\u51fa\u9519\uff1a",e),Promise.reject(e)})),a.interceptors.response.use((function(e){return console.log("\u54cd\u5e94\u62e6\u622a\u5668\u88ab\u89e6\u53d1\uff1a",e),e.data}),(function(e){return console.error("\u54cd\u5e94\u62e6\u622a\u5668\u51fa\u9519\uff1a",e),Promise.reject(e.data)})),s.interceptors.response.use((function(e){return console.log("\u54cd\u5e94\u62e6\u622a\u5668\u88ab\u89e6\u53d1\uff1a",e),e.data}),(function(e){return console.error("\u54cd\u5e94\u62e6\u622a\u5668\u51fa\u9519\uff1a",e),Promise.reject(e.data)}));var o=t(8764);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p={groupId:1,contractName:"SupplyChain",contractPath:"/SupplyChain",version:"",funcName:"isRegister",contractAddress:"0x2193b14e975b761323f6b774e906765ebf815770",contractAbi:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"nodeAddress",type:"address"},{indexed:!0,internalType:"enum SupplyChain.NodeType",name:"nodeType",type:"uint8"}],name:"NodeCanceled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"nodeAddress",type:"address"},{indexed:!0,internalType:"enum SupplyChain.NodeType",name:"nodeType",type:"uint8"}],name:"NodeRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"nodeAddress",type:"address"},{indexed:!0,internalType:"enum SupplyChain.NodeType",name:"nodeType",type:"uint8"}],name:"NodeVerified",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"productCode",type:"string"},{indexed:!0,internalType:"address",name:"nodeAddress",type:"address"}],name:"ProductInfoAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"productCode",type:"string"}],name:"ProductInfoVerified",type:"event"},{inputs:[{internalType:"string",name:"_productName",type:"string"},{internalType:"string",name:"_producerName",type:"string"},{internalType:"string",name:"_productionDate",type:"string"},{internalType:"string",name:"_location",type:"string"},{internalType:"string",name:"_batchNumber",type:"string"},{internalType:"string[]",name:"_ingredients",type:"string[]"}],name:"addProduct",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"admin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_node",type:"address"}],name:"cancelNode",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAllNode",outputs:[{components:[{internalType:"address",name:"nodeAddress",type:"address"},{internalType:"enum SupplyChain.NodeType",name:"nodeType",type:"uint8"},{internalType:"bool",name:"isRegistered",type:"bool"}],internalType:"struct SupplyChain.Node[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllProductHash",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_productHash",type:"uint256"}],name:"getProduct",outputs:[{components:[{internalType:"string",name:"productName",type:"string"},{internalType:"string",name:"producerName",type:"string"},{internalType:"string",name:"productionDate",type:"string"},{internalType:"string",name:"location",type:"string"},{internalType:"string",name:"batchNumber",type:"string"},{internalType:"string[]",name:"ingredients",type:"string[]"}],internalType:"struct SupplyChain.ProductInfo",name:"productInfo",type:"tuple"},{internalType:"address",name:"owner",type:"address"},{internalType:"bool",name:"paused",type:"bool"},{components:[{components:[{internalType:"address",name:"nodeAddress",type:"address"},{internalType:"enum SupplyChain.NodeType",name:"nodeType",type:"uint8"},{internalType:"bool",name:"isRegistered",type:"bool"}],internalType:"struct SupplyChain.Node",name:"node",type:"tuple"},{internalType:"bool",name:"isVerified",type:"bool"},{internalType:"uint256",name:"timestamp",type:"uint256"}],internalType:"struct SupplyChain.ChainTrace[]",name:"chainTraces",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_node",type:"address"}],name:"isRegister",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"nodes",outputs:[{internalType:"address",name:"nodeAddress",type:"address"},{internalType:"enum SupplyChain.NodeType",name:"nodeType",type:"uint8"},{internalType:"bool",name:"isRegistered",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"enum SupplyChain.NodeType",name:"_nodeType",type:"uint8"}],name:"registerNode",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_node",type:"address"},{internalType:"uint256",name:"_productHash",type:"uint256"}],name:"transferProduct",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_productHash",type:"uint256"}],name:"verifiedProduct",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_node",type:"address"}],name:"verifyNode",outputs:[],stateMutability:"nonpayable",type:"function"}],useAes:!1,useCns:!1,cnsName:""},l=function(e,n,t){return s.post("/trans/handleWithSign",c(c(c(c({},p),{},{signUserId:e,funcName:n},("string"===typeof t||"number"===typeof t)&&{funcParam:[t]}),Array.isArray(t)&&{funcParam:t}),"object"===typeof t&&!Array.isArray(t)&&{funcParam:Object.values(t)}))},d=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"test";return a.get("/user/newUser",{params:{signUserId:e,appId:n}})},y=function(e){return a.get("/user/".concat(e,"/userInfo"))},f=function(e,n){return n=o.Buffer.from(n).toString("hex"),a.post("/sign",{signUserId:e,encodedDataStr:n})},m=function(e,n){return l(e,"isRegister",n)},h=function(e,n){return l(e,"registerNode",n)},T=function(){return l("admin","getAllNode")},g=function(e,n){return l(e,"nodes",n)},b=function(e){return l("admin","verifyNode",e)},x=function(e){return l("admin","cancelNode",e)},v=function(e,n){return l(e,"addProduct",n)},j=function(){return l("admin","getAllProductHash")},w=function(e){return l("admin","getProduct",e)},N=function(e,n){return l(e,"transferProduct",n)},C=function(e,n){return l(e,"verifiedProduct",n)}},4372:function(e,n,t){"use strict";t(7294);var r=t(5893);n.Z=function(e){var n=e.children;return(0,r.jsx)("h1",{className:"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200",children:n})}},3608:function(e,n,t){"use strict";t.r(n);var r=t(266),i=t(809),a=t.n(i),s=t(7294),o=t(4372),u=t(8196),c=t(3651),p=t(1721),l=t(2422),d=t(5893);n.default=function(){var e=(0,s.useState)([]),n=e[0],t=e[1],i=["\u751f\u4ea7\u5546","\u6d41\u901a\u5546"];(0,s.useEffect)((function(){"2"!==localStorage.getItem("nodeType")?(alert("\u60a8\u6ca1\u6709\u6743\u9650\u8bbf\u95ee\u8be5\u9875\u9762\uff01"),window.location.href="/pages"):y()}),[]);var y=function(){var e=(0,r.Z)(a().mark((function e(){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.m7)();case 2:n=e.sent,r=JSON.parse(n).filter((function(e){return 2!==e[1]})),t(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function f(){return(f=(0,r.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.EX)(n);case 2:if(!(t=e.sent).statusOK){e.next=9;break}return alert("\u64cd\u4f5c\u6210\u529f\uff01"),e.next=7,y();case 7:e.next=10;break;case 9:alert("\u64cd\u4f5c\u5931\u8d25\uff01\u9519\u8bef\u4fe1\u606f\uff1a"+t.message);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=(0,r.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.cT)(n);case 2:if(t=e.sent,console.log("result============",t),!t.statusOK){e.next=10;break}return alert("\u64cd\u4f5c\u6210\u529f\uff01"),e.next=8,y();case 8:e.next=11;break;case 10:alert("\u64cd\u4f5c\u5931\u8d25\uff01\u9519\u8bef\u4fe1\u606f\uff1a"+t.message);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,d.jsxs)(u.Z,{children:[(0,d.jsx)(o.Z,{children:"\u7528\u6237\u5ba1\u6838"}),(0,d.jsx)(c.TableContainer,{className:"mb-8",children:(0,d.jsxs)(c.Table,{children:[(0,d.jsx)(c.TableHeader,{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)(c.TableCell,{children:"\u8282\u70b9\u5730\u5740"}),(0,d.jsx)(c.TableCell,{children:"\u7528\u6237\u89d2\u8272"}),(0,d.jsx)(c.TableCell,{children:"\u5ba1\u6838\u72b6\u6001"}),(0,d.jsx)(c.TableCell,{children:"\u64cd\u4f5c"})]})}),(0,d.jsx)(c.TableBody,{children:n.map((function(e,n){return(0,d.jsxs)(c.TableRow,{children:[(0,d.jsx)(c.TableCell,{children:(0,d.jsx)("div",{className:"flex items-center text-sm",children:(0,d.jsx)("p",{className:"font-semibold",children:e[0]})})}),(0,d.jsx)(c.TableCell,{children:(0,d.jsx)("span",{className:"text-sm",children:i[e[1]]})}),(0,d.jsx)(c.TableCell,{children:(0,d.jsx)("span",{className:"text-sm",children:e[2]?"\u5ba1\u6838\u901a\u8fc7":"\u672a\u5ba1\u6838"})}),(0,d.jsx)(c.TableCell,{children:(0,d.jsx)("div",{className:"flex items-center gap-x-4",children:e[2]?(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(c.Button,{onClick:function(){return function(e){return m.apply(this,arguments)}(e[0])},children:[(0,d.jsx)(l.NoIcon,{className:"w-5 h-5","aria-hidden":"true"}),(0,d.jsx)("span",{children:"\u9a73\u56de"})]})}):(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(c.Button,{onClick:function(){return function(e){return f.apply(this,arguments)}(e[0])},children:[(0,d.jsx)(l.OkIcon,{className:"w-5 h-5","aria-hidden":"true"}),(0,d.jsx)("span",{children:"\u6279\u51c6"})]})})})})]},n)}))})]})})]})}},9560:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pages/users",function(){return t(3608)}])},4155:function(e){var n,t,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:i}catch(e){n=i}try{t="function"===typeof clearTimeout?clearTimeout:a}catch(e){t=a}}();var o,u=[],c=!1,p=-1;function l(){c&&o&&(c=!1,o.length?u=o.concat(u):p=-1,u.length&&d())}function d(){if(!c){var e=s(l);c=!0;for(var n=u.length;n;){for(o=u,u=[];++p<n;)o&&o[p].run();p=-1,n=u.length}o=null,c=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===a||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(n){try{return t.call(null,e)}catch(n){return t.call(this,e)}}}(e)}}function y(e,n){this.fun=e,this.array=n}function f(){}r.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];u.push(new y(e,n)),1!==u.length||c||s(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},219:function(e,n,t){"use strict";function r(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}t.d(n,{Z:function(){return r}})}},function(e){e.O(0,[442,196,774,888,179],(function(){return n=9560,e(e.s=n);var n}));var n=e.O();_N_E=n}]);