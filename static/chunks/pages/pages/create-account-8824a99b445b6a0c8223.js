(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45],{1721:function(e,n,t){"use strict";t.d(n,{gK:function(){return N},EX:function(){return T},cT:function(){return x},CS:function(){return y},m7:function(){return h},Dg:function(){return v},wv:function(){return j},pH:function(){return f},W$:function(){return l},td:function(){return b},gD:function(){return g},Xx:function(){return m},ap:function(){return w},kD:function(){return S}});var r=t(2809),a=t(2861),s=a.Z.create({baseURL:"/sign/WeBASE-Sign",headers:{"Content-Type":"application/json"},timeout:5e3}),i=a.Z.create({baseURL:"/contract/WeBASE-Front",headers:{"Content-Type":"application/json"},timeout:5e3});s.interceptors.request.use((function(e){return console.log("\u8bf7\u6c42\u62e6\u622a\u5668\u88ab\u89e6\u53d1\uff1a",e),e}),(function(e){return console.error("\u8bf7\u6c42\u62e6\u622a\u5668\u51fa\u9519\uff1a",e),Promise.reject(e)})),i.interceptors.request.use((function(e){return console.log("\u8bf7\u6c42\u62e6\u622a\u5668\u88ab\u89e6\u53d1\uff1a",e),e}),(function(e){return console.error("\u8bf7\u6c42\u62e6\u622a\u5668\u51fa\u9519\uff1a",e),Promise.reject(e)})),s.interceptors.response.use((function(e){return console.log("\u54cd\u5e94\u62e6\u622a\u5668\u88ab\u89e6\u53d1\uff1a",e),e.data}),(function(e){return console.error("\u54cd\u5e94\u62e6\u622a\u5668\u51fa\u9519\uff1a",e),Promise.reject(e.data)})),i.interceptors.response.use((function(e){return console.log("\u54cd\u5e94\u62e6\u622a\u5668\u88ab\u89e6\u53d1\uff1a",e),e.data}),(function(e){return console.error("\u54cd\u5e94\u62e6\u622a\u5668\u51fa\u9519\uff1a",e),Promise.reject(e.data)}));var o=t(8764);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var c={groupId:1,contractName:"SupplyChain",contractPath:"/SupplyChain",version:"",funcName:"isRegister",contractAddress:"0x2193b14e975b761323f6b774e906765ebf815770",contractAbi:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"nodeAddress",type:"address"},{indexed:!0,internalType:"enum SupplyChain.NodeType",name:"nodeType",type:"uint8"}],name:"NodeCanceled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"nodeAddress",type:"address"},{indexed:!0,internalType:"enum SupplyChain.NodeType",name:"nodeType",type:"uint8"}],name:"NodeRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"nodeAddress",type:"address"},{indexed:!0,internalType:"enum SupplyChain.NodeType",name:"nodeType",type:"uint8"}],name:"NodeVerified",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"productCode",type:"string"},{indexed:!0,internalType:"address",name:"nodeAddress",type:"address"}],name:"ProductInfoAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"productCode",type:"string"}],name:"ProductInfoVerified",type:"event"},{inputs:[{internalType:"string",name:"_productName",type:"string"},{internalType:"string",name:"_producerName",type:"string"},{internalType:"string",name:"_productionDate",type:"string"},{internalType:"string",name:"_location",type:"string"},{internalType:"string",name:"_batchNumber",type:"string"},{internalType:"string[]",name:"_ingredients",type:"string[]"}],name:"addProduct",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"admin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_node",type:"address"}],name:"cancelNode",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAllNode",outputs:[{components:[{internalType:"address",name:"nodeAddress",type:"address"},{internalType:"enum SupplyChain.NodeType",name:"nodeType",type:"uint8"},{internalType:"bool",name:"isRegistered",type:"bool"}],internalType:"struct SupplyChain.Node[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllProductHash",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_productHash",type:"uint256"}],name:"getProduct",outputs:[{components:[{internalType:"string",name:"productName",type:"string"},{internalType:"string",name:"producerName",type:"string"},{internalType:"string",name:"productionDate",type:"string"},{internalType:"string",name:"location",type:"string"},{internalType:"string",name:"batchNumber",type:"string"},{internalType:"string[]",name:"ingredients",type:"string[]"}],internalType:"struct SupplyChain.ProductInfo",name:"productInfo",type:"tuple"},{internalType:"address",name:"owner",type:"address"},{internalType:"bool",name:"paused",type:"bool"},{components:[{components:[{internalType:"address",name:"nodeAddress",type:"address"},{internalType:"enum SupplyChain.NodeType",name:"nodeType",type:"uint8"},{internalType:"bool",name:"isRegistered",type:"bool"}],internalType:"struct SupplyChain.Node",name:"node",type:"tuple"},{internalType:"bool",name:"isVerified",type:"bool"},{internalType:"uint256",name:"timestamp",type:"uint256"}],internalType:"struct SupplyChain.ChainTrace[]",name:"chainTraces",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_node",type:"address"}],name:"isRegister",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"nodes",outputs:[{internalType:"address",name:"nodeAddress",type:"address"},{internalType:"enum SupplyChain.NodeType",name:"nodeType",type:"uint8"},{internalType:"bool",name:"isRegistered",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"enum SupplyChain.NodeType",name:"_nodeType",type:"uint8"}],name:"registerNode",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_node",type:"address"},{internalType:"uint256",name:"_productHash",type:"uint256"}],name:"transferProduct",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_productHash",type:"uint256"}],name:"verifiedProduct",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_node",type:"address"}],name:"verifyNode",outputs:[],stateMutability:"nonpayable",type:"function"}],useAes:!1,useCns:!1,cnsName:""},d=function(e,n,t){return i.post("/trans/handleWithSign",p(p(p(p({},c),{},{signUserId:e,funcName:n},("string"===typeof t||"number"===typeof t)&&{funcParam:[t]}),Array.isArray(t)&&{funcParam:t}),"object"===typeof t&&!Array.isArray(t)&&{funcParam:Object.values(t)}))},l=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"test";return s.get("/user/newUser",{params:{signUserId:e,appId:n}})},y=function(e){return s.get("/user/".concat(e,"/userInfo"))},m=function(e,n){return n=o.Buffer.from(n).toString("hex"),s.post("/sign",{signUserId:e,encodedDataStr:n})},f=function(e,n){return d(e,"isRegister",n)},g=function(e,n){return d(e,"registerNode",n)},h=function(){return d("admin","getAllNode")},b=function(e,n){return d(e,"nodes",n)},T=function(e){return d("admin","verifyNode",e)},x=function(e){return d("admin","cancelNode",e)},N=function(e,n){return d(e,"addProduct",n)},v=function(){return d("admin","getAllProductHash")},j=function(e){return d("admin","getProduct",e)},w=function(e,n){return d(e,"transferProduct",n)},S=function(e,n){return d(e,"verifiedProduct",n)}},3947:function(e,n,t){"use strict";t.r(n);var r=t(266),a=t(809),s=t.n(a),i=t(7294),o=t(1664),u=t(5675),p=t(1163),c=t(1721),d=t(4663),l=t(3651),y=t(5893);n.default=function(){var e=(0,i.useContext)(l.WindmillContext).mode,n=(0,p.useRouter)(),t=(0,i.useState)(""),a=t[0],m=t[1],f=(0,i.useState)(2),g=f[0],h=f[1],b=(0,i.useState)(!1),T=b[0],x=b[1],N="dark"===e?"/assets/img/create-account-office-dark.jpeg":"/assets/img/create-account-office.jpeg",v=["\u751f\u4ea7\u5546","\u6d41\u901a\u5546","\u5f85\u9009\u62e9"];function j(e){h(e),x(!1)}function w(){return(w=(0,r.Z)(s().mark((function e(n){var t,r,a,i,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.userName,2!==g){e.next=4;break}return alert("\u8bf7\u9009\u62e9\u89d2\u8272"),e.abrupt("return");case 4:return e.next=6,(0,c.W$)(t);case 6:return"success"!==(r=e.sent).message&&alert("\u7528\u6237\u540d\u5df2\u6ce8\u518c\uff01"),e.next=10,(0,c.CS)(t);case 10:return a=e.sent,e.next=13,S(r.data.signUserId,r.data.address);case 13:return i=e.sent,console.log(i[1].toString()),o=0,"true"==i[2]&&(o=1),(0,d.c)({signUserId:a.data.signUserId,address:a.data.address,nodeType:g.toString(),isRegister:o.toString()}),e.next=20,P();case 20:I();case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,n){return C.apply(this,arguments)}function C(){return(C=(0,r.Z)(s().mark((function e(n,t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.td)(n,t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return _.apply(this,arguments)}function _(){return(_=(0,r.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.gD)(a,g);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){n.push("/pages/")}return(0,y.jsxs)("div",{className:"flex flex-col justify-center items-center min-h-screen p-6 bg-gray-50 dark:bg-gray-900",children:[(0,y.jsx)("div",{className:"mb-16 text-center text-4xl font-bold",children:"\u4f9b\u5e94\u94fe\u6eaf\u6e90\u7ba1\u7406\u7cfb\u7edf"}),(0,y.jsx)("div",{className:"h-full w-1/2 mx-auto overflow-hidden bg-white rounded-lg shadow-xl dark:bg-gray-800",children:(0,y.jsxs)("div",{className:"flex flex-col overflow-y-auto md:flex-row",children:[(0,y.jsx)("div",{className:"relative h-32 md:h-auto md:w-1/2",children:(0,y.jsx)(u.default,{"aria-hidden":"true",className:"object-cover w-full h-full",src:N,alt:"Office",layout:"fill"})}),(0,y.jsx)("main",{className:"flex items-center justify-center p-6 sm:p-12 md:w-1/2",children:(0,y.jsxs)("div",{className:"w-full",children:[(0,y.jsx)("h1",{className:"mb-8 text-xl font-semibold text-gray-700 dark:text-gray-200",children:"\u6ce8\u518c\u8d26\u6237"}),(0,y.jsxs)(l.Label,{children:[(0,y.jsx)("span",{children:"\u7528\u6237\u540d"}),(0,y.jsx)(l.Input,{className:"mt-1",value:a,onChange:function(e){return m(e.target.value)},type:"text",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})]}),(0,y.jsxs)("div",{className:"relative mt-8 flex flex-col flex-wrap",children:[(0,y.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,y.jsx)(l.Button,{onClick:function(){x(!T)},"aria-label":"Notifications","aria-haspopup":"true",children:"\u9009\u62e9\u7528\u6237\u89d2\u8272"}),(0,y.jsxs)("span",{children:["\u5f53\u524d\u7528\u6237\u89d2\u8272\uff1a",v[g]]})]}),(0,y.jsxs)(l.Dropdown,{className:"z-10",isOpen:T,onClose:function(){},children:[(0,y.jsx)(l.DropdownItem,{onClick:function(){return j(0)},children:(0,y.jsx)("span",{children:v[0]})}),(0,y.jsx)(l.DropdownItem,{onClick:function(){return j(1)},children:(0,y.jsx)("span",{children:v[1]})})]})]}),(0,y.jsx)(l.Button,{block:!0,className:"mt-8",onClick:function(){return function(e){return w.apply(this,arguments)}({userName:a})},children:"\u521b\u5efa\u8d26\u6237"}),(0,y.jsx)("hr",{className:"my-8"}),(0,y.jsx)("p",{className:"mt-4",children:(0,y.jsx)(o.default,{href:"/pages/login",children:(0,y.jsx)("a",{className:"text-sm font-medium text-purple-600 dark:text-purple-400 hover:underline",children:"\u5df2\u7ecf\u6709\u8d26\u6237\u4e86\uff1f\u70b9\u6b64\u767b\u5f55"})})})]})})]})})]})}},4663:function(e,n,t){"use strict";function r(e){localStorage.setItem("signUserId",e.signUserId),localStorage.setItem("address",e.address),localStorage.setItem("nodeType",e.nodeType),localStorage.setItem("isRegister",e.isRegister)}t.d(n,{c:function(){return r}})},5200:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pages/create-account",function(){return t(3947)}])}},function(e){e.O(0,[442,675,774,888,179],(function(){return n=5200,e(e.s=n);var n}));var n=e.O();_N_E=n}]);